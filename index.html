<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Result Portal</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ðŸŽ“</text></svg>">
    <meta name="description" content="Mini Student Result Portal - add, view, search, and manage student results locally.">
</head>
<body>
    <header class="app-header">
        <h1>Student Result Portal</h1>
        <p class="subtitle">Add, compute, and manage results in your browser</p>
        <div class="header-actions">
            <button class="btn" id="theme-toggle" aria-label="Toggle theme">Toggle Theme</button>
        </div>
    </header>

    <main class="container">
        <section class="card" id="form-card">
            <h2 id="form-title">Add Student</h2>
            <form id="student-form" autocomplete="off">
                <div class="grid">
                    <label class="field">
                        <span>Name</span>
                        <input type="text" id="name" placeholder="e.g., Aditi Sharma" aria-describedby="name-error" required>
                        <small class="error-text hidden" id="name-error">Name is required.</small>
                    </label>
                    <label class="field">
                        <span>Roll No.</span>
                        <input type="text" id="roll" placeholder="e.g., CS24-031" aria-describedby="roll-error" required>
                        <small class="error-text hidden" id="roll-error">Roll number is required and must be unique.</small>
                    </label>
                </div>

                <div class="subjects">
                    <div class="subjects-header">
                        <h3>Subjects & Marks</h3>
                        <button type="button" id="add-subject" class="btn secondary">+ Add Subject</button>
                    </div>
                    <div id="subject-rows" class="subject-rows">
                        <!-- Rows injected by JS -->
                    </div>
                </div>

                <div class="actions">
                    <button type="submit" class="btn primary" id="submit-btn">Save</button>
                    <button type="button" class="btn" id="reset-btn">Reset</button>
                    <button type="button" class="btn danger hidden" id="cancel-edit-btn">Cancel Edit</button>
                </div>
            </form>
        </section>

        <section class="card" id="list-card">
            <div class="list-toolbar">
                <div class="search">
                    <input type="search" id="search" placeholder="Search by name or roll...">
                </div>
                <div class="controls">
                    <label>
                        <span>Sort</span>
                        <select id="sort">
                            <option value="createdAt_desc">Newest</option>
                            <option value="percentage_desc">% High â†’ Low</option>
                            <option value="percentage_asc">% Low â†’ High</option>
                            <option value="name_asc">Name A â†’ Z</option>
                            <option value="name_desc">Name Z â†’ A</option>
                        </select>
                    </label>
                    <div class="toolbar">
                        <button type="button" class="btn" id="export-json" title="Export JSON">Export</button>
                        <input type="file" id="import-file" accept="application/json" class="hidden" />
                        <button type="button" class="btn" id="import-json" title="Import JSON">Import</button>
                        <button type="button" class="btn" id="download-csv" title="Download CSV">CSV</button>
                        <button type="button" class="btn danger" id="clear-all" title="Clear all data">Clear</button>
                        <label class="page-size">
                            <span>Per page</span>
                            <select id="page-size">
                                <option>5</option>
                                <option selected>10</option>
                                <option>20</option>
                                <option>50</option>
                            </select>
                        </label>
                    </div>
                </div>
            </div>

            <div class="table-wrapper">
                <div class="stats" id="stats"></div>
                <table id="students-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Name</th>
                            <th>Roll</th>
                            <th>Total</th>
                            <th>%</th>
                            <th>Grade</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="students-tbody">
                        <!-- Rows injected by JS -->
                    </tbody>
                </table>
                <div class="empty-state hidden" id="empty-state">No students yet. Add one above.</div>
                <div class="pagination" id="pagination"></div>
            </div>
        </section>
    </main>

    <div id="view-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="view-title">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="view-title">Student Details</h3>
                <button class="icon-btn" id="close-modal" aria-label="Close" accesskey="x">âœ•</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Filled by JS -->
            </div>
        </div>
        <div class="modal-backdrop"></div>
    </div>

    <footer class="app-footer">
        <small>Data is stored locally in your browser. No server required.</small>
    </footer>

    <script src="app.js" defer></script>
    <noscript>Please enable JavaScript to use this app.</noscript>
    <!--
        Mini Student Result Portal
        - Add students with any number of subjects
        - Computes total, percentage, and grade
        - Search, sort, view, edit, delete
        - Data saved in localStorage
    -->
</body>
        
</html>


